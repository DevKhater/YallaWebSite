{% extends "@YallaWebsiteFrontendBundle/views/front_base.html.twig" %}
{% block stylesheets %}
    {{parent()}}
    {% stylesheets '@lightbox_css' %}
    <link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}"/>
    {% endstylesheets %}
{% endblock %}
{% block body %}
    <style>
        .thumbnail {
            margin: 0 auto;
            padding: 0;
        }
        .carousel-control.left, .carousel-control.right {
            background-image: none;
        }
        .carousel-control.left:hover, 
        .carousel-control.right:hover {
            background: rgba (0,0,0,0.5);
        }
        .modal-title {
            text-align: center;
        }
        .modal-footer #moda_footer_social {
            float:left;
        }
        .im:after {
            content: '';
            display: block;
            clear: both;
        }
        /* ---- .im-item ---- */
        .grid-sizer,
        .im-item {
            width: 33.333%;
        }
        .im-item {
            float: left;
        }
        .im-item img {
            display: block;
            width: 100%;
            max-width: 100%;
        }
        .modal-content {
            background-color: rgb(26, 26, 26);
        }
        .modal-dialog {
            background-color: rgb(26, 26, 26);
            width: 60%;
        }
        .modal-header {
            border-bottom: none;  
        }
        .modal-footer {
            border-top: none;  
        }

        #socialButtonsLikeShare{
            display: inline-block;
            float:left;


        }
        #socialButtonsLikeShare .button{
            float:left;
            margin-right: 4px;
        }
    </style>
    <div class="pageContent">
        <div class="theEntityDiv">
            <div class="innerTitle">
                <h1>{{gallery.name}} {{gallery.date|date("d/m/Y")}}</h1>
            </div>
            <div id="innerEntityContent">
                {{ gallery.description }}
            </div>
            <div id="galleryViewPhotogtapher">
                {% if gallery.photographers is not empty %}
                    <p><span>Photo Credit</span>: 
                        {% for ph in gallery.photographers %}
                            <a href='ph.website'>{{ph.name}}</a> {% if not loop.last %} - {% endif %} 
                        {% endfor %}
                    </p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="row">
        <div class="im">
            <div class="grid-sizer"></div>
            {% for galleryHasMedia in gallery.GalleryHasMedias %}
                <div class="im-item">
                    <a title="" href="#"><img class="thumbnail img-responsive" src="{% path galleryHasMedia.media, 'large' %}"></a></div>

            {% endfor %}
        </div>
    </div>

    <div class="modal" id="myModal" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" type="button" data-dismiss="modal">Ã—</button>
                    <h3 class="modal-title">{{gallery.name}}</h3>
                </div>
                <div class="modal-body col-lg-12">
                    <div id="modalCarousel" class="carousel" style="float: left">
                        <div class="carousel-inner">
                        </div>
                        <a class="carousel-control left" href="#modaCarousel" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
                        <a class="carousel-control right" href="#modalCarousel" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
                    </div>
                    <div class="col-lg-4">
                        <div id='moda_footer_social' style="float:left; display: inline-block">{{ socialButtons() }}</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="col-lg-3"></div>
                <div class="col-lg-6">{{ render_esi(url('ads_manager_show', { 'id': 'snapshot_popup' })) }}</div>
                <div class="col-lg-3"></div>
            </div>
        </div>
    </div>     
</div>     
</div>     
{% endblock %}

{% block massonary %}
    {% javascripts '@massonary' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <script>
        var $grid = $('.im').masonry({
            itemSelector: '.im-item',
            percentPosition: true,
            columnWidth: '.grid-sizer'
        });
        // layout Isotope after each image loads
        $grid.imagesLoaded().progress(function () {
            $grid.masonry();
        });
    </script>
    <script>
        /* copy loaded thumbnails into carousel */
        $('.row .thumbnail').on('load', function () {
        }).each(function (i) {
            if (this.complete) {
                var item = $('<div class="item"></div>');
                var itemDiv = $(this).parents('div');
                var title = $(this).parent('a').attr("title");
                item.attr("title", title);
                $(itemDiv.html()).appendTo(item);
                item.appendTo('.carousel-inner');
                if (i == 0) { // set first item active
                    item.addClass('active');
                }
            }
        });
        /* activate the carousel */
        $('#modalCarousel').carousel({interval: false});
        /* change modal title when slide changes */
        $('#modalCarousel').on('slid.bs.carousel', function () {
            $('.modal-title').html($(this).find('.active').attr("title"));
        })
        /* when clicking a thumbnail */
        $('.row .thumbnail').click(function () {
            var idx = $(this).parents('div').index();
            var id = parseInt(idx);
            var fixid = id - 1;
            $('#myModal').modal('show'); // show the modal
            $('#modalCarousel').carousel(fixid); // slide carousel to selected
        });
        $('.carousel-control.left').click(function () {
            $('#modalCarousel').carousel('prev');
        });
        $('.carousel-control.right').click(function () {
            $('#modalCarousel').carousel('next');
        });
    </script>
{% endblock %}